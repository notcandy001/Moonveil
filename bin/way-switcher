#!/usr/bin/env bash


#---------------waybar paths----------------------------------#
#-------------------------------------------------------------#
WAYBAR="$HOME/.config/waybar"
STATE="$HOME/.cache/waybar-current"


#---------------rofi mode selector----------------------------#
#-------------------------------------------------------------#
CHOICE=$(
  printf "Main\nMinimal" |
  rofi -dmenu -p "Waybar"
)


#---------------select config---------------------------------#
#-------------------------------------------------------------#
case "$CHOICE" in
  Main)
    CFG="$WAYBAR/config.jsonc"
    CSS="$WAYBAR/style.css"
    ;;
  Minimal)
    CFG="$WAYBAR/minimal.jsonc"
    CSS="$WAYBAR/style-minimal.css"
    ;;
  *)
    exit 0
    ;;
esac


#---------------save current state----------------------------#
#-------------------------------------------------------------#
echo "$CFG|$CSS" > "$STATE"


#---------------restart waybar--------------------------------#
#-------------------------------------------------------------#
pkill -x waybar
sleep 0.4
waybar -c "$CFG" -s "$CSS" &
