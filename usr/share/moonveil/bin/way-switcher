#!/usr/bin/env bash


#---------------waybar paths----------------------------------#
WAYBAR="$HOME/.config/waybar"
STATE="$HOME/.cache/waybar-current"


#---------------rofi mode selector----------------------------#
CHOICE=$(
  printf "Main\nminimal\ncodee\ndarkminimal" |
  rofi -dmenu -p "Waybar"
)


#---------------select config---------------------------------#
case "$CHOICE" in
  Main)
    CFG="$WAYBAR/config.jsonc"
    CSS="$WAYBAR/style.css"
    ;;
    minimal)
    CFG="$WAYBAR/themes/minimal/config.jsonc"
    CSS="$WAYBAR/themes/minimal/style.css"
    ;;
    codee)
    CFG="$WAYBAR/themes/codee/config.jsonc"
    CSS="$WAYBAR/themes/codee/style.css"
    ;;
  darkminimal)
    CFG="$WAYBAR/themes/darkminimal/config.jsonc"
    CSS="$WAYBAR/themes/darkminimal/style.css"
    ;;
  *)
    exit 0
    ;;
esac


#---------------save current state----------------------------#
echo "$CFG|$CSS" > "$STATE"


#---------------restart waybar--------------------------------#
pkill -x waybar
sleep 0.4
waybar -c "$CFG" -s "$CSS" &